# Building Detection Challenge
インターン生課題コンぺに使われたスクリプト

## 使い方
1.  データの切り出し
    - dataslider.ipynb でtrainデータを切り出します。

## 学習

- train.py
  - モデルはNestedUnet

## 実装
- apply.pyで学習させたモデルを使う。
- slideはテストデータの画像を読み込むとき、重なり方をします数字。
  - slideが256でpatchが256の場合、読み込めれる画像は重ならない。
  - slideが228でpatchが256の場合、読み込む画像の半分が重なるようになっています。
- ttaを使って画像を読み取りたい人は、--augumentをTrueに変えてください

## 成果
20epochで学習させたモデルの評価が下に表示されてます。

Patch | Slide | tta | Score
--- | --- | --- | ---
448 | 448 | no | 48.24
448 | 224 | no | 49.73
448 | 112 | no | 50.37
448 | 112 | yes | 45.48
448 | 90 | no | 51.02
448 | 90 | yes | 48.77
**448** | **75** | **no** | **51.27**
448 | 64 | no | 51.02

ttaを使うと評価が下がることが分かりました。

slideの調整を変えてみたところ、patchの1/6のスライドが一番高い評価を出しました。

GPUに乗る最大のpatchサイズが704でしたので704のpatchサイズでも使ってみました。

Patch | Slide | Score
--- | --- | ---
704 | 704 | 48.7
704 | 140 | 50.87
**704** | **117** | **51.02**

704のpatchも1/6のスライドが一番良かったです。

100epoch学習させたモデルを使うと点数が上がりました。

Patch | Slide | Score
--- | --- | --- 
704 | 117 | 56.27
448 | 75 | 56.70
**224** | **37** | **56.81**

